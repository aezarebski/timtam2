#+title: Simulating datasets
#+author: Alexander E. Zarebski
#+STARTUP: noinlineimages
#+Time-stamp: <Last modified: 2022-04-15 14:48:54>

* Example 1

[[file:../example-1/readme.org][LINK TO ANALYSIS]]

This example contains a constant rate simulation without any scheduled samples.
Figure [[fig:ex1-fig]] displays the full transmission tree in the simulation.

#+caption: Visualisation of the simulation in Example 1. This figure shows time running forwards relative to the tMRCA of the transmission tree.
#+name: fig:ex1-fig
#+attr_org: :width 500px
#+attr_html: :width 400px
[[./out/ex1/ape-simulation-figure.png]]

** Configuration

- [[file:./src/ex1/sim-params.xml]] contains the parameters for this simulation.
- [[file:./src/ex1/prep-data.R]] prepares the dataset.
- [[file:./out/ex1/ex1.json]] contains the final dataset to be used in the example.
  The times in this output file all run backwards treating the last tip in the
  reconstructed tree as time zero.

There are no scheduled samples and the rates are kept constant.

** Running the simulation

#+begin_src sh
Rscript srcq/ape-sim.R --verbose src/ex1/sim-params.xml
Rscript src/ex1/prep-data.R
#+end_src

The results of this can be seen in Figure [[fig:ex1-fig]].

* Example 2

[[file:../example-2/readme.org][LINK TO ANALYSIS]]

This example contains a variable rate simulation without any scheduled samples.
Figure [[fig:ex2-fig]] displays the full transmission tree in the simulation.

#+caption: Visualisation of the simulation in Example 2.
#+name: fig:ex2-fig
#+attr_org: :width 500px
#+attr_html: :width 400px
[[./out/ex2/ape-simulation-figure.png]]

** Configuration

- =src/ex2/sim-params.xml= contains the parameters for this simulation.
- =src/ex2/prep-data.R= prepares the dataset.
- =out/ex2/= is where the final dataset lives, primarily in =out/ex2/ex2.json=

There are no scheduled samples and the rates are kept constant.

** Running the simulation

#+begin_src sh
Rscript src/ape-sim.R --verbose src/ex2/sim-params.xml
Rscript src/ex2/prep-data.R
#+end_src

The results of this can be seen in Figure [[fig:ex2-fig]].

* Example 3

[[file:../example-3/readme.org][LINK TO ANALYSIS]]

This example contains a constant rate simulation without any scheduled samples
and with sequence data rather than the tree.

** Configuration

- [[file:./src/ex3/sim-params.xml]] contains the parameters for this simulation.
- [[file:./src/ex3/prep-data.R]] prepares the dataset.
- [[file:./out/ex3/ex3.json]] contains the final dataset to be used in the example.
  The times in this output file all run backwards treating the last tip in the
  reconstructed tree as time zero.

** Running the simulation

#+begin_src sh
Rscript src/ape-sim.R --verbose src/ex3/sim-params.xml
Rscript src/ex3/prep-data.R
#+end_src
